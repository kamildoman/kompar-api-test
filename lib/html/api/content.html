<div class="base_container"> <div class="left_menu"> <a href="#"><img class="imgLogo" src="https://uploads-ssl.webflow.com/5e066b03be0f82573b6e8b54/5e28d6321a254c015bb8a7e9_kompar.png"></a> <div class="sidenav" id="sidenav"> <hr><a href="#Introduction" id="Introduction_">Introduction</a><hr> <a href="#Get_started" id="Get_started_">Get started</a><hr> <a href="#Authorization" class="dropdown-btn" id="Authorization_">Authorization<i class="fa fa-caret-down"></i></a> <div class="dropdown-container" id="MenuDrop1"> <a href="#Token" class="sub" id="Token_">Token</a> <a href="#Receiving_access_token" class="sub" id="Receiving_access_token_">Receiving access token</a> <a href="#The_token_is_returned" class="sub" id="The_token_is_returned_">The token is returned</a> <a href="#Sample_request" class="sub" id="Sample_request_">Sample request</a> </div><hr> <a href="#Authentication" class="dropdown-btn" id="Authentication_">Authentication<i class="fa fa-caret-down"></i></a> <div class="dropdown-container" id="MenuDrop2"> <a href="#Header" class="sub" id="Header_">Header</a> <a href="#Sample_request2" class="sub" id="Sample_request2_">Sample request</a> </div><hr> <a href="#Webhooks" class="dropdown-btn" id="Webhooks_">Webhooks<i class="fa fa-caret-down"></i></a> <div class="dropdown-container" id="MenuDrop3"> <a href="#About_webhooks" class="sub" id="About_webhooks_">About webhooks</a> <a href="#Applications_webhook" class="sub" id="Applications_webhook_">Applications webhook</a> <a href="#Client_webhook" class="sub" id="Client_webhook_">Client's decision webhook</a> <a href="#Remove_webhook" class="sub" id="Remove_webhook_">Remove webhook</a> <a href="#Webhook_security" class="sub" id="Webhook_security_">Webhook security</a> <a href="#Application_details" class="sub" id="Application_details_">Application details</a> <a href="#Client_details" class="sub" id="Client_details_">Client's decision details</a> <a href="#Confirmation_receiving" class="sub" id="Confirmation_receiving_">Confirmation of receiving</a> </div><hr> <a href="#Offer" class="dropdown-btn" id="Offer_">Offer<i class="fa fa-caret-down"></i></a> <div class="dropdown-container" id="MenuDrop4"> <a href="#Send_offer" class="sub" id="Send_offer_">Send offer</a> </div><hr> <a href="#Option_lists" class="dropdown-btn" id="Option_lists_">Option lists<i class="fa fa-caret-down"></i></a> <div class="dropdown-container" id="MenuDrop5"> <a href="#Loan purpose" class="sub" id="Loan_purpose_">Loan purpose</a> </div><hr> <a class="sub" id="end_"></a> </div><div class="left_menu_fotter"> <a href="https://www.kompar.se/"><img src="https://uploads-ssl.webflow.com/5e066b03be0f82573b6e8b54/5e2ad79d941c939418b5fd94_kompar2.png" style="display: table-row"></a> <div style="display: table-row">it@kompar.se</div><hr> <h1>138an Group AB ©2020</h1> </div></div><div class="base"> <div class="section2"> <h1 id="Introduction">Introduction</h1> <div class="title"> Our Web API provides users with fast and reliable access to data about clients' loans applications.<br><br>The Kompar API is based on REST principles. It uses standard HTTP response codes and verbs, and token-based authentication.<br><br>You must make all your requests to the API over HTTPS. Any requests made over HTTP will fail.<br><br>For both environments (test, production), there is currently a rate limit of 30 requests per minute.<br>When you hit the limit, you’ll receive a 429 TOO MANY REQUESTS ERROR. </div></div><div class="section2"> <h1 id="Get_started">Get started</h1> <div class="title"> (to determine)<br><div class="sub_message"> <h3>Test url:</h3> <div class="endpoint"> </div></div><div class="sub_message"> <h3>Production url:</h3> <div class="endpoint"> </div></div></div></div><div class="section2"> <h1 id="Authorization">Authorization</h1> <div class="title"> This guide shows how to get a user’s authorization to access methods of the API. </div><div class="message"> <h1 id="Token">Token</h1> Requests to the Kompar API require authentication. The user must have granted permission to access the requested data. To prove that the user has granted permission, the request header must include a valid access token. This is achieved by using the Login and Password received from the developer site and calling the token request. <br><br>You may have just one valid access token. <div class="sub_message"> <h1 id="Receiving_access_token">Receiving access token</h1> Using your unique Login and Password you call the token request to retrieve an access token. The call is made towards the endpoint: <div class="endpoint"> GET url/token </div>The header of this GET request must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Header </div><hr> Authorization </div><div class="right"> <div class="title"> Value </div><hr> Required. Base 64 encoded string that contains the login and password. The field must have the format:<br>"Authorization: Basic &lt;login:password&gt;" </div></div></div></div><div class="sub_message"> <h1 id="The_token_is_returned">The token is returned</h1> On success, the response has the status code 200 OK and the following JSON data in the response body: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>true</h2> </div></div><div class="rows"> <div class="left"> <h2>token</h2> string </div><div class="right"> An access token to be used in subsequent calls to the Kompar API. </div></div><div class="rows"> <div class="left"> <h2>token_type</h2> string </div><div class="right"> How the token may be used, always "Bearer". </div></div><div class="rows"> <div class="left"> <h2>expires_in</h2> int </div><div class="right"> The time period (in seconds) for which the token is valid. </div></div></div><div style="margin-top: 30px;">On error, the response has the status code 400 NOT FOUND and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>false</h2> </div></div><div class="rows"> <div class="left"> <h2>message</h2> string </div><div class="right"> Message about error. </div></div></div><div style="margin-top: 30px;">For INTERNAL SERVER ERROR the response has status 500 and returns no data.</div></div><div class="sub_message"> <h1 id="Sample_request">Sample request</h1> An example request to the token endpoint will look something like this: <ul class="ul_code"> <li><button onclick="authorizationBash(true)">Bash</button></li><li><button onclick="authorizationNode(true)">Node.js</button></li><li><button onclick="authorizationPython(true)">Python</button></li></ul> <div id="authorizationContent"></div><div style="margin-top: 30px;">Response to the request will look like this:</div><pre style="margin-top: 20px;">{<br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"success"</span>:&nbsp;<span style="color: #90ee90">true</span> <br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"token"</span>:&nbsp;<span style="color: #E5DA73">"xxxxx...yyyyy...zzzzz"</span> <br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"token_type"</span>:&nbsp;<span style="color: #E5DA73">"Bearer"</span> <br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"expires_in</span>:&nbsp;3600 <br>}</pre> </div></div></div><div class="section2"> <h1 id="Authentication">Authentication</h1> <div class="title"> All requests towards the API's require authentication. </div><div class="message"> <h1 id="Header">Header</h1> The token received from token request must then be used when calling the API by sending it in the request's authorization header. <div class="sub_message"> <div class="endpoint"> Authorization : Bearer xxxxx...yyyyy...zzzzz </div></div><div class="sub_message"> <h1 id="Sample_request2">Sample request</h1> An example request which includes authentication token will look something like this: <ul class="ul_code"> <li><button onclick="authenticationBash(true)">Bash</button></li><li><button onclick="authenticationNode(true)">Node.js</button></li></ul> <div id="authenticationContent"></div></div></div></div><div class="section2"> <h1 id="Webhooks">Webhooks</h1> <div class="title"> This section includes all webhooks available through API. <br><br>All requests require authentication. </div><div class="message"> <h1 id="About_webhooks">About webhooks</h1> Kompar provides webhooks to alert of changes regarding clients' applications. These are POST requests to your server that are sent as soon as an event occurs. The body of the request contains details of the event. <div class="sub_message"> <h1 id="Applications_webhook">Applications webhook</h1> To register applications webhook you have to make call towards the endpoint: <div class="endpoint"> POST url/webhooks/applications </div>The header of this POST request in addition to the required authorization header must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Header </div><hr> Content-Type </div><div class="right"> <div class="title"> Value </div><hr> application/json </div></div></div><br>The body of this POST request must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Body </div><hr> <h2>url</h2> string </div><div class="right"> <div class="title"> Value </div><hr> The url that will listen to notifications (must be HTTPS). </div></div></div><div style="margin-top: 30px;">On success, the response has the status code 200 OK and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>true</h2> </div></div></div><div style="margin-top: 30px;">On error, the response has the status code 400 NOT FOUND and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>false</h2> </div></div><div class="rows"> <div class="left"> <h2>message</h2> string </div><div class="right"> Message about error. </div></div></div><div style="margin-top: 30px;">For INTERNAL SERVER ERROR the response has status 500 and returns no data.</div><div style="margin-top: 40px;">An example request to the applications webhook endpoint will look something like this:</div><ul class="ul_code"> <li><button onclick="applicationWebhookBash(true)">Bash</button></li><li><button onclick="applicationWebhookNode(true)">Node.js</button></li><li><button onclick="applicationWebhookPython(true)">Python</button></li></ul> <div id="applicationWebhookContent"></div><div style="margin-top: 30px;">Response to the applications webhook endpoint will look like this:</div><pre style="margin-top: 20px;">{<br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"success"</span>:&nbsp;<span style="color: #90ee90">true</span><br>}</pre> </div><div class="sub_message"> <h1 id="Client_webhook" style="margin-top: 30px;">Client's decision webhook</h1> To register decisions webhook you have to make call towards the endpoint: <div class="endpoint"> POST url/webhooks/decisions </div>The header of this POST request in addition to the required authorization header must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Header </div><hr> Content-Type </div><div class="right"> <div class="title"> Value </div><hr> application/json </div></div></div><br>The body of this POST request must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Body </div><hr> <h2>url</h2> string </div><div class="right"> <div class="title"> Value </div><hr> The url that will listen to notifications (must be HTTPS). </div></div></div><div style="margin-top: 30px;">On success, the response has the status code 200 OK and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>true</h2> </div></div></div><div style="margin-top: 30px;">On error, the response has the status code 400 NOT FOUND and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>false</h2> </div></div><div class="rows"> <div class="left"> <h2>message</h2> string </div><div class="right"> Message about error. </div></div></div><div style="margin-top: 30px;">For INTERNAL SERVER ERROR the response has status 500 and returns no data.</div><div style="margin-top: 40px;">An example request to the decisions webhook endpoint will look something like this:</div><ul class="ul_code"> <li><button onclick="decisionsWebhookBash(true)">Bash</button></li><li><button onclick="decisionsWebhookNode(true)">Node.js</button></li><li><button onclick="decisionsWebhookPython(true)">Python</button></li></ul> <div id="decisionsWebhookContent"></div><div style="margin-top: 30px;">Response to the decisions webhook endpoint will look like this:</div><pre style="margin-top: 20px;">{<br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"success"</span>:&nbsp;<span style="color: #90ee90">true</span><br>}</pre> </div><div class="sub_message" style="margin-top: 30px;"> <h1 id="Remove_webhook">Remove webhook</h1> To remove application webhook you have to make call towards the endpoint: <div class="endpoint"> DELETE url/webhooks/applications </div>To remove decisions webhook you have to make call towards the endpoint: <div class="endpoint"> DELETE url/webhooks/decisions </div><div style="margin-top: 30px;">On success, the response has the status code 200 OK and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>true</h2> </div></div></div><div style="margin-top: 30px;">On error, the response has the status code 400 NOT FOUND and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>false</h2> </div></div><div class="rows"> <div class="left"> <h2>message</h2> string </div><div class="right"> Message about error. </div></div></div><div style="margin-top: 30px;">For INTERNAL SERVER ERROR the response has status 500 and returns no data.</div><div style="margin-top: 40px;">An example request to the delete webhook endpoint will look something like this:</div><ul class="ul_code"> <li><button onclick="deleteWebhookBash(true)">Bash</button></li><li><button onclick="deleteWebhookNode(true)">Node.js</button></li><li><button onclick="deleteWebhookPython(true)">Python</button></li></ul> <div id="deleteWebhookContent"></div><div style="margin-top: 30px;">Response to the delete webhook endpoint will look like this:</div><pre style="margin-top: 20px;">{<br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"success"</span>:&nbsp;<span style="color: #90ee90">true</span><br>}</pre> </div><div class="sub_message"> <h1 id="Webhook_security">Webhook security</h1> After registering webhook you will receive event as soon as an occurs. The request authorization header will have a token. You should verify the token on your server to prevent attackers from imitating valid webhooks. <br><br>The header of our requests will have the following parameters: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Header </div><hr> Authorization </div><div class="right"> <div class="title"> Value </div><hr> token xxxxx-yyyyy-zzzzz<br>(this token was provided for you during registration) </div></div><br><div class="rows"> <div class="left"> Content-Type </div><div class="right"> application/json </div></div></div><div style="margin-top: 40px;">An example cheking of token will look something like this:</div><ul class="ul_code"> <li><button onclick="checkTokenNode(true)">Node.js</button></li><li><button onclick="checkTokenPython(true)">Python</button></li></ul> <div id="checkTokenContent"></div></div><div class="sub_message"> <h1 id="Application_details">Application details</h1> Application sended to you via webhook will always has the same structure. The body JSON will has the following fields: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>data</h2> string </div><div class="right"> <div class="title"> Description </div><hr> <h2>Base64 string which includes ecrypted application</h2> </div></div><div class="rows"> <div class="left"> <h2>iv</h2> string </div><div class="right"> Base64 string which includes initialization vector </div></div></div><br>You will have to decrypt data using provided key. <div style="margin-top: 20px;">Sample code may look something like this: </div><ul class="ul_code"> <li><button onclick="applicationWebhookDetailsNode(true)">Node.js</button></li><li><button onclick="applicationWebhookDetailsPython(true)">Python</button></li></ul> <div id="applicationWebhookDetailsContent"></div><br>The decrypted JSON will has the following fields: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>application_id</h2> string </div><div class="right"> <div class="title"> Description </div><hr> <h2>Id of application in Kompar's system</h2> </div></div><div class="rows"> <div class="left"> <h2>name</h2> string </div><div class="right"> The full name of the client </div></div><div class="rows"> <div class="left"> <h2>personal_id</h2> string </div><div class="right"> The Swedish national identification number of the client </div></div><div class="rows"> <div class="left"> <h2>email</h2> string </div><div class="right"> Email of the client </div></div><div class="rows"> <div class="left"> <h2>amount</h2> int </div><div class="right"> The amount requested by the client </div></div><div class="rows"> <div class="left"> <h2>duration</h2> int </div><div class="right"> The desired repayment term requested by the client (in months) </div></div><div class="rows"> <div class="left"> <h2>purpose</h2> string </div><div class="right"> The purpose of the application. Available options you may find in the option lists section. </div></div></div></div><div class="sub_message"> <h1 id="Client_details">Client's decision details</h1> Client details sended to you via webhook will always have the same structure. The body JSON will has the following fields: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>application_id</h2> string </div><div class="right"> <div class="title"> Description </div><hr> <h2></h2> </div></div><div class="rows"> <div class="left"> <h2>client_id</h2> string </div><div class="right"> </div></div><div class="rows"> <div class="left"> <h2>accepted</h2> boolean </div><div class="right"> </div></div></div><br>If offer is accepted you will receive as well: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>email</h2> string </div><div class="right"> <div class="title"> Description </div><hr> <h2></h2> </div></div><div class="rows"> <div class="left"> <h2>phone_number</h2> string </div><div class="right"> </div></div></div></div><div class="sub_message"> <h1 id="Confirmation_receiving">Confirmation of receiving</h1> Upon receiving a webhook notification, you should acknowledge success by responding with an HTTP 200 response within 10 seconds. Otherwise, we will attempt to resend the notification 5 times according to the following schedule: <ul class="ul_schedule"> <li>30 seconds after the first attempt</li><br><li>2 minutes after the second attempt</li><br><li>15 minutes after the third attempt</li><br><li>2 hours after the fourth attempt</li><br><li>10 hours after the fifth attempt</li></ul> </div></div></div><div class="section2"> <h1 id="Offer">Offer</h1> <div class="title"> This section shows how to send offer for specific application after receiving it from webhook. <br><br>All requests require authentication. </div><div class="message"> <h1 id="Send_offer">Send offer</h1> To send an offer for application you have to make call towards the endpoint: <div class="sub_message"> <div class="endpoint"> POST url/offer </div>The header of this POST request in addition to the required authorization header must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Header </div><hr> Content-Type </div><div class="right"> <div class="title"> Value </div><hr> application/json </div></div></div><br>The body of this POST request must contains the following parameter: <div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Body </div><hr> <h2>application_id</h2> string </div><div class="right"> <div class="title"> Value </div><hr> The id of application existed in our system. </div></div><div class="rows"> <div class="left"> <h2>granted_amount</h2> string </div><div class="right"> TODO </div></div><div class="rows"> <div class="left"> <h2>total_cost</h2> string </div><div class="right"> TODO </div></div></div><div style="margin-top: 30px;">On success, the response has the status code 200 OK and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>true</h2> </div></div></div><div style="margin-top: 30px;">On error, the response has the status code 400 NOT FOUND and the following JSON data in the response body:</div><div class="parameter"> <div class="rows"> <div class="left"> <div class="title"> Key </div><hr> <h2>success</h2> boolean </div><div class="right"> <div class="title"> Description </div><hr> <h2>false</h2> </div></div><div class="rows"> <div class="left"> <h2>message</h2> string </div><div class="right"> Message about error. </div></div></div><div style="margin-top: 30px;">For INTERNAL SERVER ERROR the response has status 500 and returns no data.</div><div style="margin-top: 40px;">An example request to the offer endpoint will look something like this:</div><ul class="ul_code"> <li><button onclick="offerBashContent(true)">Bash</button></li><li><button onclick="offerNodeContent(true)">Node.js</button></li><li><button onclick="offerPythonContent(true)">Python</button></li></ul> <div id="offerContent"></div><div style="margin-top: 30px;">Response to the offer endpoint will look like this:</div><pre style="margin-top: 20px;">{<br>&nbsp;&nbsp;&nbsp;<span style="color: #E5DA73">"success"</span>:&nbsp;<span style="color: #90ee90">true</span><br>}</pre> </div></div></div><div class="section2"> <h1 id="Option_lists">Option lists</h1> <div class="title"> This section includes all option lists available through API. </div><div class="message"> <h1 id="Loan_purpose">Loan purpose</h1> Available loan purposes: <ul> <li>Anledning till lån</li><li>Anställa personal</li><li>Betala leverantörer</li><li>Betala löner</li><li>Förvärv</li><li>Generell likviditet / kassaflöde</li><li>Hemsida / marknadsföring</li><li>Inköp av lager</li><li>Inköp av maskiner</li><li>Oväntade utgifter</li><li>Renovering</li><li>Säsongsinvestering</li><li>Omfinansiering av lån / samla lån</li><li>Övrigt</li></ul> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><div id="end" class="section2"> <br></div></div></div>